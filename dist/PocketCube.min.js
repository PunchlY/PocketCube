!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i(module):"function"==typeof define&&define.amd?define(["module"],i):(t="undefined"!=typeof globalThis?globalThis:t||self).Rubik=i({})}(this,(function(t){"use strict";class i{constructor(t=0){if(!(t=~~t))return;const i=this.#t=[],s=this.#i=[];i.push((3-Array.from({length:7}).reduce(((s,e)=>(i.push(e=t%3),t=~~(t/3),s+e)),0)%3)%3),Array.from({length:8}).forEach((function(i,e){s.push(this.splice(t%(8-e),1)[0]),t=~~(t/(8-e))}),Array.from({length:8}).map(((t,i)=>i)))}#i=[0,1,2,3,4,5,6,7];#t=[0,0,0,0,0,0,0,0];get position(){const t=[8];return this.#t.slice(0,-1).reduceRight(((t,i)=>3*t+i),this.#i.reduceRight(((i,s,e)=>{const o=t.findIndex((t=>s<t));return t.splice(o,0,s),i*(8-e)+o}),0))}at(t){return 3*this.#i[t]+this.#t[t]}find(t){const i=this.#i.indexOf(~~(t/3)%8);return 3*i+(3+t%3-this.#t[i])%3}*[Symbol.iterator](){for(let t=0;t<8;t++)yield 3*this.#i[t]+this.#t[t]}get 0(){return 3*this.#i[0]+this.#t[0]}get 1(){return 3*this.#i[1]+this.#t[1]}get 2(){return 3*this.#i[2]+this.#t[2]}get 3(){return 3*this.#i[3]+this.#t[3]}get 4(){return 3*this.#i[4]+this.#t[4]}get 5(){return 3*this.#i[5]+this.#t[5]}get 6(){return 3*this.#i[6]+this.#t[6]}get 7(){return 3*this.#i[7]+this.#t[7]}copy(){const t=new this.constructor[Symbol.species];return t.#i=[].concat(this.#i),t.#t=[].concat(this.#t),t}action(...t){return t.forEach((t=>{if(!(t instanceof i))throw"";const s=[],e=[];t.#i.forEach(((i,o)=>{s[o]=this.#i[i],e[o]=(this.#t[i]+t.#t[o])%3})),this.#i=s,this.#t=e})),this}inverse(){const t=[],i=[];return this.#i.forEach(((s,e)=>{t[s]=e,i[s]=(3-this.#t[e])%3})),this.#i=t,this.#t=i,this}image(){const t=[],i=[];return[1,0,3,2,5,4,7,6].forEach(((s,e,o)=>{t[e]=o[this.#i[s]],i[e]=(3-this.#t[s])%3})),this.#i=t,this.#t=i,this}}i.prototype.length=8,i.prototype[Symbol.isConcatSpreadable]=!0;class s extends i{action(...t){return super.copy().action(...t)}inverse(){return super.copy().inverse()}image(){return super.copy().image()}static C=[0,16219978,2469029,33104619,17954269,49605440,51565086,34630144,3470675,84669705,36364435,50607086,18222084,52672894,36822425,51396687,70206073,38451740,40288914,53569564,84835823,73463517,71102743,86465138].map((t=>new this(t)));static _C=Array.from({length:8}).map(((t,i)=>this.C.slice().sort(((t,s)=>t[i]-s[i]))));static X=[this.C[14],this.C[18],this.C[8]];static Y=[this.C[6],this.C[9],this.C[3]];static Z=[this.C[4],this.C[15],this.C[13]];static R=[77350359,68566824,50861415].map((t=>new this(t)));static U=[51438240,84505680,33067440].map((t=>new this(t)));static F=[21433374,84383208,62951382].map((t=>new this(t)));static L=[15944780,20238498,22807586].map((t=>new this(t)));static D=[37179,164025,126846].map((t=>new this(t)));static B=[4540624,5469687,929887].map((t=>new this(t)))}class e extends i{isReinstated(){return[0,16219978,2469029,33104619,17954269,49605440,51565086,34630144,3470675,84669705,36364435,50607086,18222084,52672894,36822425,51396687,70206073,38451740,40288914,53569564,84835823,73463517,71102743,86465138][this[0]]===this.position}*similar(t=NaN,i=0){const e=new Set;for(const[o,n]of[this,this.copy().image(),this.copy().inverse(),this.copy().image().inverse()].entries())if(!e.has(n.position))for(const r of s.C){const c=r.action(n);for(const n of function*(){if(null===t||isNaN(t))for(const t of s.C)yield t;else yield s._C[i][c.find(t)]}()){const t=c.copy().action(n),i=t.position;e.has(i)||(e.add(i),yield{r:t,c:[r,n],image:!!(1&o),inverse:!!(2&o)})}}}*congruent(t=NaN,i=0){const e=new Set;for(const o of s.C){const n=o.action(this);for(const r of function*(){if(null===t||isNaN(t))for(const t of s.C)yield t;else yield s._C[i][n.find(t)]}()){const t=n.copy().action(r),i=t.position;e.has(i)||(e.add(i),yield{r:t,c:[o,r],image:!1,inverse:!1})}}}*similarNoCongruence(t=NaN,i=0){const e=new Set;for(const[o,n]of[,this.copy().image(),this.copy().inverse(),this.copy().image().inverse()].entries())if(n&&!e.has(n.position))for(const r of s.C){const c=r.action(n);for(const n of function*(){if(null===t||isNaN(t))for(const t of s.C)yield t;else yield s._C[i][c.find(t)]}()){const t=c.copy().action(n),i=t.position;e.has(i)||(e.add(i),yield{r:t,c:[r,n],image:!!(1&o),inverse:!!(2&o)})}}}do(t){return this.action(...function*(t,i){for(let s=0;s<t.length;s++)"2"===t[s+1]?yield i[t[s++]][1]:"'"===t[s+1]?yield i[t[s++]][2]:yield i[t[s]][0]}(`${t}`.replace(/\s/g,"").split(""),s))}}return i.prototype.constructor=i,i[Symbol.species]=e,s.prototype.constructor=s,e.prototype.constructor=e,e.Turn=s,e.Rubik=e,t.exports=e}));